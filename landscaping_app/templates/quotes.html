{% extends "base.html" %}
{% block title %}Quotes - Landscaping App{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h1>Quotes</h1>
    <a href="/quotes/new" class="btn btn-primary">Add Quote</a>
</div>
<div class="mb-3">
    <a href="/quotes" class="btn btn-sm {% if not filter_status %}btn-primary{% else %}btn-outline-secondary{% endif %}">All</a>
    <a href="/quotes?status=Draft" class="btn btn-sm {% if filter_status == 'Draft' %}btn-primary{% else %}btn-outline-secondary{% endif %}">Draft</a>
    <a href="/quotes?status=Sent" class="btn btn-sm {% if filter_status == 'Sent' %}btn-primary{% else %}btn-outline-secondary{% endif %}">Sent</a>
    <a href="/quotes?status=Accepted" class="btn btn-sm {% if filter_status == 'Accepted' %}btn-primary{% else %}btn-outline-secondary{% endif %}">Accepted</a>
    <a href="/quotes?status=Declined" class="btn btn-sm {% if filter_status == 'Declined' %}btn-primary{% else %}btn-outline-secondary{% endif %}">Declined</a>
</div>
{% if quotes %}
<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>ID</th>
                <th>Client</th>
                <th>Description</th>
                <th>Est. Cost</th>
                <th>Status</th>
                <th>Created</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for q in quotes %}
            <tr>
                <td>{{ q.id }}</td>
                <td>{{ q.client_name }}</td>
                <td>{{ q.description[:40] }}{% if q.description|length > 40 %}…{% endif %}</td>
                <td>${{ '%.2f'|format(q.estimated_cost) }}</td>
                <td>{{ q.status }}</td>
                <td>{{ q.created_at[:10] if q.created_at else '—' }}</td>
                <td>
                    <a href="/quotes/{{ q.id }}" class="btn btn-sm btn-outline-secondary">View</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<p>No quotes found. <a href="/quotes/new">Create your first quote.</a></p>
{% endif %}
{% endblock %}
